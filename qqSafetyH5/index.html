<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no,minimal-ui">
<title>企Z</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

	<div id="game">
    	<div class="s1">
            <img src="img/s1_bg.jpg" alt="img" class="both"/>
            <a href="#" class="s1A">
                <img src="img/s1Show.png" alt="img"/>
            </a>
            <div class="s1text">
                <img src="img/s1_text1.png" alt="img" class="s1text_1"/>
                <img src="img/s1_text2.png" alt="img" class="s1text_2"/>
                <img src="img/s1_text3.png" alt="img" class="s1text_3"/>
                <img src="img/s1_text4.png" alt="img" class="s1text_4"/>
                <img src="img/s1_text5.png" alt="img" class="s1text_5"/>
                <img src="img/s1_text6.png" alt="img" class="s1text_6"/>
            </div>
            <div class="s1Map">
            	<div class="sp">
                	<img src="img/s1_yuan.png" alt="img" class="s1_yuan"/>
                    <img src="img/s1_decorate_1.png" alt="img" class="s1_decorate_1"/>
                    <img src="img/masonry_2.png" alt="img" class="s1_masonry"/>
                    <img src="img/s1_g_1.png" alt="img" class="s1_g s1_g_1"/>
                    <img src="img/s1_g_2.png" alt="img" class="s1_g s1_g_2"/>
                    <img src="img/s1_g_3.png" alt="img" class="s1_g s1_g_3"/>
                    <img src="img/s1_g_4.png" alt="img" class="s1_g s1_g_4"/>
                </div>
                <img src="img/s1Penguin.png" alt="img" class="s1Penguin"/>
            </div>
        </div>
        
        <div class="s2">
        	<img src="img/s2ImgHead.png" alt="img" class="s2ImgHead"/>
        	<img src="img/hezi.png" alt="img" class="s2_hezi"/>
        	<div class="round">
            	<img src="img/round.png" alt="img" class="roundImg"/>
            	<img src="img/masonry_2.png" alt="img" class="masonry"/>
                <img src="img/s2_guang.png" alt="img" class="s2_guang"/>
                <img src="img/s2_guang.png" alt="img" class="s2_guang s2_guang_s"/>
            </div>
            <div class="text">
            	<p><span class="name">小美baby</span><img src="img/s2_text1.png" alt="img" class="s2_text1"/><span class="name num">531</span><img src="img/s2_text2.png" alt="img" class="s2_text2"/></p>
                <p><img src="img/s2_text3.png" alt="img" class="s2_text3"/></p>
            </div>
        </div>
        
        <div class="s3_1">
        	<img src="img/s3A.png" alt="img" class="s3A"/>
            <img src="img/s3_text1.png" alt="img" class="s3_text1"/>
            <canvas class="s3_sperm_jpg" width="326" height="307"></canvas>
            <div class="s3_sperm">
                <div class="s3_sperm_box1">
                    <div class="s3_sperm_box1_wrap">
                        <img src="img/s3_sperm_box1.png" alt="img"/>
                        <img src="img/s3_sperm_box1.png" alt="img"/>
                    </div>
                </div>
                <img src="img/s3_sperm_box2.png" alt="img" class="s3_sperm_box2"/>
                <div class="s3_sperm_box3">
                    <img src="img/s3_sperm_box3.png" alt="img" class="s3_sperm_box3"/>
                </div>
            </div>
        </div>
        
        <div class="s3">
            <div class="bg">
            	<div class="decorate_1">
                	<div class="img">
                    	<img src="img/bian.png" alt="img"/>
                		<img src="img/bian.png" alt="img"/>
                    </div>
                </div>
                <div class="decorate_2s">
                </div>
               	<div class="user">
                	<img src="img/decorate_4.png" alt="img" class="decorate_4"/>
                    <div class="decorate_3">
                    	<img src="img/decorate_3_1.png" alt="img"/>
                    	<img src="img/decorate_3_2.png" alt="img"/>
                    	<img src="img/decorate_3_3.png" alt="img"/>
                    	<img src="img/decorate_3_4.png" alt="img"/>
                    	<img src="img/decorate_3_5.png" alt="img"/>
                    </div>
                    <div class="hide">
                    	<div class="hideBox">
                        	<div class="decorate_5">
                            	<img src="img/user.jpg" alt="img"/>
                        	</div>
                            <div class="name">叼叼小王子</div>
                            <img src="img/decorate_6.png" alt="img" class="decorate_6"/>
                        </div>
                    </div>
                    
                </div>
                <div class="decorate_7">
                	<img src="img/decorate_8.png" alt="img" class="decorate_8"/>
                	<img src="img/decorate_8.png" alt="img" class="decorate_8 decorate_8_2"/>
                    <div class="decorate_9">
                    	<div class="decorate_10"></div>
                    	<img src="img/decorate_8.png" alt="img" class="decorate_8"/>
                    </div>
                </div>
                
                <div class="s3_light_8 decorate_12">
                    <img src="img/s3_light_8.png" alt="img" class="s3_light_8_rotate"/>
                    <img src="img/decorate_9.png" alt="img" class="decorate_11"/>
                </div>
            </div>
            
            <div class="s3Box2">
                <img src="img/s3_text2.png" alt="img" class="s3_text2"/>
                <img src="img/s3A2.png" alt="img" class="s3A2"/>
                <div class="qq">
                    <div class="s3_light_5">
                        <img src="img/s3_light_5.png" alt="img"/>
                    </div>
                    <img src="img/s3_light_4.png" alt="img" class="s3_light_4"/>
                    <img src="img/s3_light_3.png" alt="img" class="s3_light_3"/>
                    <img src="img/s3_light_2.png" alt="img" class="s3_light_2"/>
                    <img src="img/s3_light_1.png" alt="img" class="s3_light_1"/>
                    <div class="s3_light_6">
                        <img src="img/s3_light_6.png" alt="img"/>
                    </div>
                    <img src="img/s3_light_10.png" alt="img" class="s3_light_10"/>
                    
                    <img src="img/s3_light_11.png" alt="img" class="s3_light_11"/>
                    <div class="s3qq1">
                        <div class="qq2Warp">
                        	<img src="img/tou.png" alt="img" class="qq3"/>
                            <img src="img/qq2.png" alt="img" class="qq2"/>
                        </div>
                    </div>
                    <div class="s3_head">
                        <img src="img/yan.png" alt="img" class="yan"/>
                        <img src="img/s3_light_7.png" alt="img" class="s3_light_7"/>
                        <div class="s3_light_8">
                            <img src="img/s3_light_8.png" alt="img" class="s3_light_8_rotate"/>
                            <img src="img/s3_light_9.png" alt="img" class="s3_light_9"/>
                            <img src="img/decorate_9.png" alt="img" class="decorate_11"/>
                        </div>
                    </div>
                    <img src="img/s3_left_footer.png" alt="img" class="s3_left_footer"/>
                    <img src="img/s3_right_footer.png" alt="img" class="s3_right_footer"/>
                    <img src="img/s3_left_hand.png" alt="img" class="s3_left_hand"/>
                    <img src="img/s3_right_hand.png" alt="img" class="s3_right_hand"/>
                    <img src="img/s3_body.png" alt="img" class="s3_body"/>
                    <img src="img/s3_light_12.png" alt="img" class="s3_light_12"/>
                    <img src="img/s3_light_12.png" alt="img" class="s3_light_12 s3_light_12_s"/>
                </div>
            </div>
            <div class="s3Box3">
                <img src="img/s3_text4.png" alt="img" class="s3_text4"/>
                <img src="img/s3A3.png" alt="img" class="s3A3"/>
            </div>
            <div class="s3Box4">
                <img src="img/s3_text5.png" alt="img" class="s3_text5"/>
                <img src="img/s3A3.png" alt="img" class="s3A4"/>
            </div>
            <div class="s3Box5">
                <img src="img/s3_text6.png" alt="img" class="s3_text6"/>
                <img src="img/s3A5.png" alt="img" class="s3A5"/>
            </div>
            <div class="s3Box6">
                <img src="img/s3_text9.png" alt="img" class="s3_text9"/>
                <img src="img/s3_text8.png" alt="img" class="s3_text8"/>
                <img src="img/s3_bg_2.jpg" alt="img" class="s3_bg_2"/>
                <img src="img/s3A6.png" alt="img" class="s3A6"/>
                <img src="img/s3A7.png" alt="img" class="s3A7"/>
                <img src="img/qq_anquan.png" alt="img" class="qq_anquan"/>
            </div>
            
        </div>
        
    </div>
    <script>
	window.requestAnimFrame = (function() {
	return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
			function(  callback, element) {
				return window.setTimeout(callback, 1000 / 60);
			};
	})();
			
	var goGame = true;
		
	function $(data){
		var $dom = document.querySelectorAll(data);
		if($dom.length > 1){
			return $dom;
		}else{
			return $dom[0];	
		}
	}
	
	function addClass(dom,data){
		if(dom.className.indexOf(data) == -1){
			dom.className += ' '+data;
		}
	}
	
	
	function each(data,fun){
		for(var i=0;i<data.length;i++){
			fun.call(data[i],i);
		}
	}
	
	function s3_bg(){
		var w = 0;
		for(var i = 0;i<10;i++){
			w += 0.1 + (Math.floor(Math.random()*5)/10);
			var $img = document.createElement('img');
			$img.className = 'decorate_2';
			$img.setAttribute('src','img/decorate_2.png');
			$img.style.left = w + 'rem';
			$img.style.top = 1 + (Math.floor(Math.random()*50)/10)+ 'rem';
			$('.decorate_2s').appendChild($img);	
		}
	}
	
	function ajax(){
			
	}
	
	function s3(){
		function ImgCanvas(){
			var img= new Image();
			img.src = 'img/s3_sperm_jpg.png';
			img.onload = function (){
				var $this = this;
				var img= new Image();
				img.src = 'img/guang.png';
				img.onload = function (){
					var canvas_i = 0;
					var ctx=$('.s3_sperm_jpg').getContext("2d");
					$guang = this;
					var ci = true;
					var cc = 0;
					function canvas(){
						if(ci){
							canvas_i+=7;	
						}else{
							canvas_i-=7;
						}
						if(canvas_i>306){
							ci = !ci;
							cc++;
							canvas_i = 306;
						}
						if(canvas_i<0){
							ci = !ci;
							canvas_i = 0;
						}
						if(cc==1){
							canvas_i = 307;
						}
						ctx.clearRect(0,0,999,999);
						ctx.drawImage($this,0,0,326,canvas_i,0,0,326,canvas_i);
						ctx.drawImage($guang,-10,-20+canvas_i);
						
						if(canvas_i<307 && $('.s3_1') != 'undefined'){
							window.requestAnimFrame(canvas);		
						}else{
							ctx.clearRect(0,0,999,999);
							ctx.drawImage($this,0,0,326,canvas_i,0,0,326,canvas_i);	
						}
					}
					canvas();
				}
			}
		}
		setTimeout(function(){
			ImgCanvas();
		},1800);
		
		
		$('.s3A2').onclick = function (){
			addClass($('.s3'),'s3process3');	
		}
		
		$('.s3A3').onclick = function (){
			addClass($('.s3'),'s3process4');	
		}
		
		$('.s3A4').onclick = function (){
			addClass($('.s3'),'s3process5');	
		}
		
		$('.s3A5').onclick = function (){
			addClass($('.s3'),'s3process6');	
		}
		
		$('.s3A').onclick = function (){
			addClass($('.s3_1'),'animateS1End');
			setTimeout(function (){
				$('.s3').className += ' animate s3process2';	
				s3_bg();
				$('#game').removeChild($('.s3_1'));
			},500);
		}
	}
	
	function s2(){
		
		var num = $('.num').innerHTML*1;
		$('.num').innerHTML = 0;
		var numI = 0;
		function numAnimate(){
			numI += Math.floor(num/50);
			if(numI >= num){
				numI = num;
			}
			$('.num').innerHTML = numI;
			
			if(numI != num){
				window.requestAnimFrame(numAnimate);
			}
		}
		
		setTimeout(function (){
			numAnimate();
		},500)
		
		
		each($('.round,.s2_hezi'),function (){
			this.onclick = function (){
				$('.s2').className += ' animateS1End';
				setTimeout(function (){
					$('.s2').parentNode.removeChild($('.s2'));
					$('.s3_1').className += ' animate';	
					s3();
				},500)
			}	
		})
	}
	
	function s1(){
		$('.s1A').onclick = function (){
			setTimeout(function (){
				$('.s2').className += ' animate';	
				s2();
				$('.s1').parentNode.removeChild($('.s1'));
			},500);
			$('.s1').className += ' animateS1End';
			return false;	
		}	
	}
	
	window.onload = function (){
		setTimeout(function (){
			$('.s1').className += ' animate';	
			s1();
		},200);
		
	}
	
	window.ontouchmove = function (){
		return false;	
	}
	
	
    </script>
    <script src="js/rem.js"></script>
</body>
</html>